{% extends "base_second.html" %} {% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/stepper.css' %}" />
<style>
  .carousel-control-next,
  .carousel-control-prev /*, .carousel-indicators */ {
      filter: invert(100%);}
  .tales {
    width: 100%;
  }
  .carousel-inner{
    width:100%;
    max-height: 330px !important;
  }

        /* Style the tab */
  .tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
  }

  /* Style the buttons that are used to open the tab content */
  .tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
  }

  /* Change background color of buttons on hover */
  .tab button:hover {
    background-color: #ddd;
  }

  /* Create an active/current tablink class */
  .tab button.active {
    background-color: #ccc;
  }

  /* Style the tab content */
  .tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
  }
  /* The Modal (background) */
  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }

  /* Modal Content */
  .modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
  }

  /* The Close Button */
  .close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
  }

</style>
<script>
  src='https://code.jquery.com/jquery-3.7.0.min.js'
</script>
<!-- <script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
  crossorigin="anonymous"
></script> -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
  crossorigin="anonymous"
></script>
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
  crossorigin="anonymous"
></script>
<div class="container  ">
  {% comment %} Progress Bar {% endcomment %}
  
  <div class="row">
    <div class="col-12 container ml-5">
          <div class="wrapper-progressBar ml-5">
            <ul class="progressBar ml-5">
              <li class="active ml-5" id="stepper">Home</li>
              <li class="active" id="stepper">Contact Information</li>
              <li class="active" id="stepper">Standard Indexes</li>
              <li class="active" id="stepper">Review Standard Docs</li>
              <li class="" id="stepper">Upload Docs</li>
              {% comment %} <li id="stepper">Drop RFP & Ask Question</li>
              <li class="" id="stepper">Drop RFP / Ask Question</li>
              <li class="" id="stepper">Extra Images</li>
              <li class="" id="stepper">Assuption and Risk Consideration</li> {% endcomment %}
              
            </ul>
          </div>
          <a class="float-right" href="mailto:pholdridge@kpmg.com.au?subject=Feedback for 'Powered Enterprise Intelligent RFP Builder'&body=Hi Paul">
            <button id="btnOutlook" class="float-right btn btn-sm border border-success" >Feedback</button>
        </a>
      



        </div>
  </div>
</div>
  {% comment %} Progress Bar {% endcomment %}
             {% comment %} Heading {% endcomment %}
             <div class=" container " >
              <div class="row-12 text-center ">
                  <div class="col-12 text-center ">
                      <h4>Section: {{show2.doc_index}}</h4>
              </div>
          </div>
          </div>
          {% comment %} Heading {% endcomment %}
<form class="" action="{% url 'SelectedIndex2' show2.id%}" method="POST">
  {% csrf_token %}
  
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="mt-1">{{show2.doc_index}}</div>
        {% if show2.file_link %}
        <iframe
          src="https://view.officeapps.live.com/op/embed.aspx?src={{show2.file_link}}"
          title="W3Schools Free Online Web Tutorials"
          width="100%"
          height="450px"
        ></iframe>
        {% else %}
        <textarea rows="18" cols="150" readonly>
          There is no file present for this section. Drop a manually edited file at the end.
          To merge all the documents into one.
        </textarea>
        {% endif %}
      </div>
    </form>
      

    <button
      type="submit"
      class="btn btn-dark btn-sm d-inline ml-3"
      style="font-size: 0.7rem; width: 5rem; background-color: #000099;margin-right: 5px"
    >
      Next
    </button>
    <a
      class="btn btn-dark d-inline ml-1 mr-1"
      style="
        font-size: 0.7rem;
        width: 4rem;
        background-color: #f2f2f2;
        color: black;
      "
      href="{% url 'firstpage'%}"
      >Home</a
    >
    <a
        class="btn btn-dark ml-2 mr-2"
        style="
          font-size: 0.7rem;
          width: 4rem;
          background-color: #f2f2f2;
          color: black;
        "
        onclick="history.back()"
        >Back</a>
    {% if show.doc_index in standard_sections or show.file_link is None %}
    {% else %}
    <a class="btn btn-dark d-inline ml-1 mr-1"
    style="
      font-size: 0.7rem;
      width: 5rem;
      background-color: #f2f2f2;
      color: black;
    " href='{{show2.file_link}}' Download>Download</a>
    {% endif %}
    <a
    class="btn btn-dark d-inline"
    style="
      font-size: 0.7rem;
      width: 4rem;
      background-color: #f2f2f2;
      color: black;
    "
    onClick="document.getElementById('q_n_a').scrollIntoView();"
    >Q&A</a>

{% comment %} #image {% endcomment %}
{% if IMGSEC%}
    <div class="container">
      
        <button
          class="btn btn-success btn-sm d-inline mt-3"
          type="button"
          data-toggle="collapse"
          data-target="#collapseExample"
          aria-expanded="false"
          aria-controls="collapseExample"
          style="background-color:#000099"
        >
          Images >
        </button>
        <div class="collapse" id="collapseExample">
          <div id="carouselExampleControls" class="carousel slide w-30" data-ride="carousel" >
            <div class="carousel-inner">
              {% for e in IMGSEC%}
                              {% if forloop.first %}
                                <div class="carousel-item  {% if forloop.first %} active {% endif %}" >
                                  
                                  <div class="col-6 container">
                                    <div class="card card-body  border border-dark mt-2 float-center" style="width:50 " >
                                        <input class="form-check-input ml-1" type="checkbox" name="sectionextraimage" value={{e.id}} id="flexRadioDefault1" >
                                        <label class="form-check-label ml-4 mb-1" for="flexRadioDefault1" style="font-size:.8rem;"><strong>{{forloop.counter}}</strong></label>
                                        
                                        <img class="w-40 " src="https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Section_Documents/{{industry}}/{{country}}/Images/{{e.image_link}}" alt="First slide" height="250" width="380">
                                    </div>
                                </div>  
                                  
                                </div>
                              {% else %}
                                <div class="carousel-item {% if  forloop.first %} active {% endif %}">
                                  
                                  <div class="col-6 container">
                                    <div class="card card-body  border border-dark mt-2" style="width:50 " >
                                        <input class="form-check-input ml-1" type="checkbox" name="sectionextraimage" value={{e.id}} id="flexRadioDefault1" >
                                        <label class="form-check-label ml-4 mb-1" for="flexRadioDefault1" style="font-size:.8rem;"><strong>{{forloop.counter}}</strong></label>
                                        
                                        <img class="w-40 " src="https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Section_Documents/{{industry}}/{{country}}/Images/{{e.image_link}}" alt="First slide" height="250" width="380">
                                    </div>
                                </div>  
                                  
                                </div>
                              {% endif %}
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
            {% endfor %}
          </div>
           {% csrf_token %}
            {% if Noimage != "A"  %}
            <div class="col-6">
              <div class="card card-body  border border-dark mt-2" style="width:20 " >
                  
                {{Noimage}}
              </div>
          </div>
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a> 
          {% endif %} 
            
            
            </div>
          </div>
        </div>

        {% endif %}

{% comment %} #image {% endcomment %}








  <div>
    <div />
    {% comment %} {% if Quest %} {% endcomment %}
    <p class="font-weight-bold mt-2" style="font-size: 0.8rem">
      Please Input Addition Queries Below
    </p>
    <small style="font-size: 0.7rem"
      >Based On Question Typed Our AI Will Provide You With 3 Best Answers As
      An Options</small
    >
    <form id='q_n_a' method="GET">
      <input
        type="text"
        class="form-control border border-dark"
        id="question"
        name="Query"
        placeholder="Enter Question"
        style="font-size: 0.7rem; width: 69rem"
      />
      <div class="d-inline float-right">
        <!-- <button
          type="submit"
          class="btn btn-dark btn-sm d-inline"
          style="font-size: 0.7rem; width: 7rem; background-color: #000099"
        >
          Submit Question
        </button> -->
        <a
          class="btn btn-dark btn-sm mt-3 mb-4 d-inline"
          style="font-size: 0.7rem; width: 4rem; background-color: #000099"
          id="myBtn"
          class='democlass'
          onClick="openModalV3()"
          >Submit Question</a
        >
        <!-- {% comment %} {% if c%} {% endcomment %} -->
        <!-- <a
          class="btn btn-dark btn-sm mt-3 mb-4 d-inline"
          style="font-size: 0.7rem; width: 4rem; background-color: #000099"
          href="{% url 'preview'%}"
          >Preview Q&A</a
        > -->
        <!-- <a
          class="btn btn-dark btn-sm mt-3 mb-4 d-inline"
          style="font-size: 0.7rem; width: 4rem; background-color: #000099"
          id="myBtn"
          class='democlass'
          onClick="openModalV3()"
          >Open Modal</a
        > -->
        <!-- <button id="myBtn" class='democlass'>Open Modal</button> -->

        <!-- <button class="btn btn-info" onclick="openModalV3()" class="open-modal">Modal</button> -->

        {% comment %} {% endif %} {% endcomment %}
      </div>
    </form>

    {% comment %} {% endif %} {% endcomment %}
  </div>
  
  </div>
</div>

</div>
<!-- <div class="modal fade" role="dialog" id="modal-div"></div> -->
<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <div id="modal-div"></div>
      
  </div>

</div>

</div>

  <div class="container">
    <!-- Copyright -->
    <footer class="mt-2">
  
      <!-- Copyright -->
      <div class="footer-copyright" style="font-family:Arial;font-size:.5rem;color:black" >© 2023 Copyright owned by one or more of the KPMG International entities. KPMG International entities provide no services to clients. All rights reserved. KPMG refers to the global organization or to one or more of the member firms of KPMG International Limited (“KPMG International”), each of which is a separate legal entity. KPMG International Limited is a private English company limited by guarantee and does not provide services to clients. For more detail about our structure please visit https://home.kpmg/governance
      </div>
      <!-- Copyright -->
    
    </footer>
    <!-- Footer --> 
  </div>

  <script>
    // Show the first tab by default
    // $('.tabs-stage div').hide();
    // $('.tabs-stage div:first').show();
    // $('.tabs-nav li:first').addClass('tab-active');

    // // Change tab class and display content
    // $('.tabs-nav a').on('click', function(event){
    //   event.preventDefault();
    //   $('.tabs-nav li').removeClass('tab-active');
    //   $(this).parent().addClass('tab-active');
    //   $('.tabs-stage div').hide();
    //   $($(this).attr('href')).show();
    // });

    var modalDiv = $("#modal-div");
    // Get the modal
    var modal = document.getElementById("myModal");
    
    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");
    
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    
    // // Html data
    // var html_data = '<div data-spy="scroll" data-target=".navbar" data-offset="50"><div class="container "><div class="container "><div class="container mt-5 "><div class="container "><strong><p class=" " style="font-size:1rem;color:dark">Please select appropriate response</p></strong><div class="alert alert-light border border-dark" role="alert" style="font-size:.9rem;width:60rem;color:black">{{Query}}</div><nav class="navbar navbar-expand-sm " style="font-size:.9rem;width:60rem;height:3rem;><ul class=""><div class="tab"><button class="tablinks" id="defaultOpen" onclick="openCity(event, "Answer1")">Answer 1</button><button class="tablinks" onclick="openCity(event, "Answer2")">Answer 2</button><button class="tablinks" onclick="openCity(event, "Answer3")">Answer 3</button>{% comment %} <button class="tablinks" onclick="openCity(event, "notsatisfied")"><a class=" float-right" href="{% url "notsatisfieddoc" %}">Not Satisfied With Answer</a></button> {% endcomment %}<div class="nav-item col-8 ml-3 float-right">{% comment %} <a class=" float-right" href="#notsatisfied">Not Satisfied with Answer</a> {% endcomment %}</div></div></ul></nav><form action="{% url "preview" %}" method="POST">{% csrf_token %}<div id="Answer1" class="tabcontent"><div class="form-check mt-3" ><label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 1</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="K" value=1 > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/AU0262.docx" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div> </div> <div id="Answer2" class="tabcontent"><div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 2</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="M" value=2 > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/AU0262.docx" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div></div> <div id="Answer3" class="tabcontent"><div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 3</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="L" value={{id2}} > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/AU0262.docx" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div></div> <div id="" class="tabcontent"> {% if data2 %} {% endif %} </div> {% if non %} <div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="AB" for="defaultCheck1"><span>{{non}}</span></label> </div> {% endif %} <div class=" mt-3"> <button type="submit" class="btn btn-dark d-inline " style="font-size:.7rem;width: 4rem;background-color:#f2f2f2;color:black">SAVE</button> </form> <a class="btn btn-dark d-inline" style="font-size:.7rem;width: 4rem;background-color:#f2f2f2;color:black" href="{% url "firstpage" %}">Change Question</a> <a class="btn btn-dark btn-sm ml-1" style=" font-size: 0.8rem; width: 4rem; background-color: #f2f2f2; color: black; " onclick="history.back()" >BACK</a> </div> </div></div></div></div></div>';

    // ajax call btn click
    function openModalV3() {
      // $("a.democlass").on("click", function(){
          var id = $(this).attr('data-id');
          // Html data

          $.ajax({
            url: "{% url 'secondpage' %}",
            type: "GET",
            data: {
              "Query": $('#question').val()
            },
            success: function(data) {
              console.log(data, 'data from the api')
              console.log(data['non'], data['data0'], data['data1'])
              // let html_data = '<div data-spy="scroll" data-target=".navbar" data-offset="50"><div class="container "><div class="container "><div class="container mt-5 "><div class="container "><strong><p class=" " style="font-size:1rem;color:dark">Please select appropriate response</p></strong><div class="alert alert-light border border-dark" role="alert" style="font-size:.9rem;width:40rem;color:black">' + data['Query'] + '</div><nav class="navbar navbar-expand-sm " style="font-size:.9rem;width:60rem;height:3rem;><ul class=""><div class="tab"><button class="tablinks" id="defaultOpen" onclick="openCity(event, "Answer1")">Answer 1</button><button class="tablinks" onclick="openCity(event, "Answer2")">Answer 2</button><button class="tablinks" onclick="openCity(event, "Answer3")">Answer 3</button><div class="nav-item col-8 ml-3 float-right"></div></div></ul></nav><form action="{% url "preview" %}" method="POST">{% csrf_token %}<div id="Answer1" class="tabcontent"><div class="form-check mt-3" ><label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 1</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="K" value=1 > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/AU0262.docx" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div> </div> <div id="Answer2" class="tabcontent"><div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 2</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="M" value=2 > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/AU0262.docx" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div></div> <div id="Answer3" class="tabcontent"><div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 3</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="L" value={{id2}} > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/AU0262.docx" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div></div> <div id="" class="tabcontent"> {% if data2 %} {% endif %} </div> {% if non %} <div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="AB" for="defaultCheck1"><span>{{non}}</span></label> </div> {% endif %} <div class=" mt-3"> <button type="submit" class="btn btn-dark d-inline " style="font-size:.7rem;width: 4rem;background-color:#f2f2f2;color:black">SAVE</button> </form> <a class="btn btn-dark d-inline" style="font-size:.7rem;width: 4rem;background-color:#f2f2f2;color:black" href="{% url "firstpage" %}">Change Question</a> <a class="btn btn-dark btn-sm ml-1" style=" font-size: 0.8rem; width: 4rem; background-color: #f2f2f2; color: black; " onclick="history.back()" >BACK</a> </div> </div></div></div></div></div>';
              let html_data = '<div class="container "> <div class="container "> <div class="container mt-5 "> <div class="container "> <strong><p class=" " style="font-size:1rem;color:dark">Please select appropriate response</p></strong> <div class="alert alert-light border border-dark" role="alert" style="font-size:.9rem;width:40rem;color:black">' + data['Query'] + '</div> <nav class="navbar navbar-expand-sm " style="font-size:.9rem;width:60rem;height:3rem;"> <ul class=""> <div class="tab"> <button class="tablinks" id="defaultOpen" onclick="openCity(event,' + "'Answer1'" + ')">Answer 1</button> <button class="tablinks" onclick="openCity(event,' + "'Answer2'" + ')">Answer 2</button> <button class="tablinks" onclick="openCity(event,' + "'Answer3'" + ')">Answer 3</button> <div class="nav-item col-8 ml-3 float-right"> </div> </div> </ul> </nav> <form id="attach_q_n_a" method="POST"> {% csrf_token %} <input name="rfp_sec_id" value="{{show2.id}}" hidden="true"> <div id="Answer1" class="tabcontent">'
              console.log(html_data, 'html data before click')
              if (data['data0']) {
                html_data = html_data + '<div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 1</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="K" value=' + data['data0'] + ' > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/' + data['data0'] + '" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div>'
                console.log(html_data, 'html data after adding data0')
              }
              html_data += '</div><div id="Answer2" class="tabcontent">'

              if (data['data1']) {
                html_data = html_data + '<div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 2</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="M" value=' + data['data1'] + ' > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/' + data['data1'] + '" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div>'
              }
              html_data += '</div><div id="Answer3" class="tabcontent">'

              if (data['data2']) {
                html_data = html_data + '<div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="A" for="defaultCheck1"><span>Document 3</span></label> <input style="width: 15px; height: 20px;" class="form-check-input ml-2" type="checkbox" name="L" value=' + data['data2'] + ' > <iframe src="https://view.officeapps.live.com/op/embed.aspx?src=https://rfpstoragecheck.blob.core.windows.net/rfpstorage/Recommended_Documents/Documents/' + data['data2'] + '" title="W3Schools Free Online Web Tutorials" width="90%" height="550px"></iframe> </div>'
              }
              html_data += '</div>'
              
              if (data['non']) {
                html_data = html_data + '<div class="form-check mt-3" > <label class="form-check-label border border-dark rounded p-1" style="font-size:.9rem;color:dark" id="AB" for="defaultCheck1"><span>{{non}}</span></label> </div>'
              }

              let last_html = '<div class=" mt-3"> <button onclick="attachQuesAns()" class="btn btn-dark d-inline " style="font-size:.7rem;width: 4rem;background-color:#f2f2f2;color:black">SAVE</button> </form> <a class="btn btn-dark d-inline" style="font-size:.7rem;width: 4rem;background-color:#f2f2f2;color:black" href="{% url "firstpage" %}">Change Question</a> <a class="btn btn-dark btn-sm ml-1" style=" font-size: 0.8rem; width: 4rem; background-color: #f2f2f2; color: black; " onclick="history.back()" >BACK</a> </div> </div></div>'
              
              html_data = html_data + last_html

              // html_data = html_data.replace('{{Query}}', data['Query']);
              console.log(html_data, 'data after replace')
              // $("#modal-div").append('<div><h1>testing here heading </h1></div>')
              $("#modal-div").html(html_data)
              // modalDiv.html(html_data);
              modal.style.display = "block";
              // $("#myEdit").modal();
              document.getElementById("defaultOpen").click();
            }
          });
          
      // });
    };

    // $(document).ready(function() {
    //     $('#attach_q_n_a').submit(function() { // catch the form's submit event
    //         $.ajax({ // create an AJAX call...
    //             data: $(this).serialize(), // get the form data
    //             type: $(this).attr('method'), // GET or POST
    //             url: $(this).attr('action'), // the file to call
    //             success: function(response) { // on success..
    //                 // $('#DIV_CONTAINING_FORM').html(response); // update the DIV 
    //                 window.alert(response['result'])
    //             }
    //         });
    //         return false;
    //     });
    // });
    function attachQuesAns() {
      var frm = $('#attach_q_n_a');
      // frm.submit(function () {
      console.log('inside the ajax call')
      console.log(frm.serialize(), 'form data serialized')
      $.ajax({
          type: frm.attr('method'),
          // action="{% url "attach_qna" %}"
          url: '{% url "attach_qna" %}',
          data: frm.serialize(),
          success: function (data) {
              // $("#SOME-DIV").html(data);
              window.alert(response['result'])
          },
          error: function(data) {
              $("#MESSAGE-DIV").html("Something went wrong!");
          }
      });
      return false;
      // });
    }
    
    // When the user clicks the button, open the modal 
    // btn.onclick = function() {
    //   modal.style.display = "block";
    // }
    
    // When the user clicks on <span> (x), close the modal
    // span.onclick = function() {
    //   modal.style.display = "none";
    // }
    
    // When the user clicks anywhere outside of the modal, close it
    // window.onclick = function(event) {
    //   if (event.target == modal) {
    //     modal.style.display = "none";
    //   }
    // }

    function openCity(evt, cityName) {
      // Declare all variables
      console.log(evt, cityName, 'event and city name')
      var i, tabcontent, tablinks;

      // Get all elements with class="tabcontent" and hide them
      tabcontent = document.getElementsByClassName("tabcontent");

      console.log(tabcontent, 'tab contentt')


      for (i = 0; i < tabcontent.length; i++) {
        console.log(tabcontent[i], 'tab ii')
        tabcontent[i].style.display = "none";
      }

      // Get all elements with class="tablinks" and remove the class "active"
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }

      // Show the current tab, and add an "active" class to the button that opened the tab
      console.log(document.getElementById(cityName), 'city nameee')
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " active";
      };
    
    document.getElementById("defaultOpen").click();
    </script>

  <!-- <script>

    function openModalV3() {
      
      $(".open-modal").on("click", function() {
          console.log('inside the click functionality...')

          // $('#theModal').modal('show');

      });
    };

  </script> -->

{% endblock content %}
<!-- 
html_data = """
<div class="container  ">

  <div class="container  ">
      <div class="container mt-5   ">
          <div class="container  ">
  <strong><p class=" " style="font-size:1rem;color:dark">Please select appropriate response</p></strong>
  <div class="alert alert-light border border-dark" role="alert" style="font-size:.9rem;width:60rem;color:black">' + data['Query'] + '</div>
  <nav class="navbar navbar-expand-sm  " style="font-size:.9rem;width:60rem;height:3rem;>  
    <ul class="">
      <div class="tab">
        <button class="tablinks" id="defaultOpen" onclick="openCity(event, 'Answer1')">Answer 1</button>
        <button class="tablinks" onclick="openCity(event, 'Answer2')">Answer 2</button>
        <button class="tablinks" onclick="openCity(event, 'Answer3')">Answer 3</button>
        
        <div class="nav-item col-8 ml-3 float-right">
          
        </div>
      </div>
      
    </ul>
  </nav>
  <form action="{% url 'preview'%}" method="POST">
      {% csrf_token %}
      <div id="Answer1" class="tabcontent">'
""" -->

<!-- 

<div class="tabs"> 
  <ul class="tabs-nav"> 
    <li><a href="#tab-1">Features</a></li> 
    <li><a href="#tab-2">Details</a></li> 
  </ul> 
  
    <div class="tabs-stage"> 
    
      <div id="tab-1"> 
      
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus nec neque nisi, dictum aliquet lectus.</p> 
      </div> 
    
      <div id="tab-2"> 
      
        <p>Phasellus pharetra aliquet viverra. Donec scelerisque tincidunt diam, eu fringilla urna auctor at.</p> 
      </div> 
    </div>
</div> 
<script>
  $('.tabs-stage div').hide();
  $('.tabs-stage div:first').show();
  $('.tabs-nav li:first').addClass('tab-active');

  $('.tabs-nav a').on('click', function(event){
    event.preventDefault();
    $('.tabs-nav li').removeClass('tab-active');
    $(this).parent().addClass('tab-active');
    $('.tabs-stage div').hide();
    $($(this).attr('href')).show();
  });

</script> -->
